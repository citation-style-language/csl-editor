<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSL Editor v2.0 - Development</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      line-height: 1.6;
      background: #f5f5f5;
    }
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px;
      border-radius: 10px;
      margin-bottom: 30px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .header h1 {
      margin: 0 0 10px 0;
      font-size: 2.5em;
    }
    .header p {
      margin: 0;
      opacity: 0.9;
      font-size: 1.1em;
    }
    .card {
      background: white;
      padding: 30px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .card h2 {
      margin-top: 0;
      color: #333;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    .links {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    .link-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 5px;
      border-left: 4px solid #667eea;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .link-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    .link-card h3 {
      margin: 0 0 10px 0;
      color: #667eea;
      font-size: 1.2em;
    }
    .link-card p {
      margin: 0 0 15px 0;
      color: #666;
      font-size: 0.95em;
    }
    .link-card a {
      display: inline-block;
      background: #667eea;
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      text-decoration: none;
      font-size: 0.9em;
      transition: background 0.2s;
    }
    .link-card a:hover {
      background: #5568d3;
    }
    .status {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }
    .status-item {
      flex: 1;
      background: #e7f3ff;
      padding: 15px;
      border-radius: 5px;
      text-align: center;
    }
    .status-item strong {
      display: block;
      font-size: 1.5em;
      color: #0066cc;
      margin-bottom: 5px;
    }
    .status-item span {
      color: #666;
      font-size: 0.9em;
    }
    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.9em;
    }
    pre {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>CSL Editor v2.0</h1>
    <p>Modern Citation Style Language Editor - Development Server</p>
  </div>

  <div class="card">
    <h2>Development Status</h2>
    <div id="status">
      <p>Loading development information...</p>
    </div>
  </div>

  <div class="card">
    <h2>Quick Links</h2>
    <div class="links">
      <div class="link-card">
        <h3>Test Page</h3>
        <p>Interactive test suite with all functionality tests</p>
        <a href="/test-example.html">Run Tests →</a>
      </div>
      <div class="link-card">
        <h3>Quick Start Guide</h3>
        <p>Get up and running in 5 minutes</p>
        <a href="/QUICKSTART.md" target="_blank">View Guide →</a>
      </div>
      <div class="link-card">
        <h3>API Documentation</h3>
        <p>Complete v2.0 documentation and API reference</p>
        <a href="/README.v2.md" target="_blank">Read Docs →</a>
      </div>
      <div class="link-card">
        <h3>Migration Guide</h3>
        <p>Migrating from v1.x to v2.0</p>
        <a href="/MIGRATION.md" target="_blank">Migration Guide →</a>
      </div>
      <div class="link-card">
        <h3>Testing Guide</h3>
        <p>Comprehensive testing instructions</p>
        <a href="/TESTING.md" target="_blank">Testing →</a>
      </div>
      <div class="link-card">
        <h3>Architecture</h3>
        <p>Modernization summary and architecture details</p>
        <a href="/MODERNIZATION_SUMMARY.md" target="_blank">Architecture →</a>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>Quick Start</h2>
    <p>To use the CSL Editor library in your project:</p>

    <h3>1. Build the library</h3>
    <pre>npm run build</pre>

    <h3>2. Use in your code</h3>
    <pre>import { init, cslStyles } from './dist/csl-editor.es.js';

// Initialize
await init();

// Search for styles
const results = cslStyles.searchByTitle('APA');

// Load a style
const styleXml = await cslStyles.loadStyleXml(
  'http://www.zotero.org/styles/apa'
);</pre>

    <h3>3. Run the test page</h3>
    <p>Click the "Test Page" link above to see it in action.</p>
  </div>

  <script type="module">
    const statusDiv = document.getElementById('status');

    // Check if build has been run
    async function checkBuildStatus() {
      try {
        // Try to load the built library
        const esResponse = await fetch('/dist/csl-editor.es.js');
        const indexResponse = await fetch('/generated/styleIndex.json');

        const hasBuilt = esResponse.ok;
        const hasStyles = indexResponse.ok;

        let html = '<div class="status">';

        html += '<div class="status-item">';
        html += hasBuilt ? '<strong style="color: #28a745;">✓</strong>' : '<strong style="color: #dc3545;">✗</strong>';
        html += '<span>Library Built</span>';
        html += '</div>';

        html += '<div class="status-item">';
        html += hasStyles ? '<strong style="color: #28a745;">✓</strong>' : '<strong style="color: #dc3545;">✗</strong>';
        html += '<span>Styles Generated</span>';
        html += '</div>';

        html += '<div class="status-item">';
        html += '<strong style="color: #0066cc;">Ready</strong>';
        html += '<span>Dev Server</span>';
        html += '</div>';

        html += '</div>';

        if (!hasBuilt || !hasStyles) {
          html += '<div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 5px;">';
          html += '<strong>⚠️ Build required:</strong> Run <code>npm run build</code> to generate the library and style files.';
          html += '</div>';
        } else {
          html += '<div style="margin-top: 20px; padding: 15px; background: #d4edda; border-left: 4px solid #28a745; border-radius: 5px;">';
          html += '<strong>✓ Ready to go!</strong> The library is built. Click "Test Page" above to try it out.';
          html += '</div>';
        }

        statusDiv.innerHTML = html;

        // If we have the index, show stats
        if (hasStyles) {
          const indexData = await indexResponse.json();
          let statsHtml = '<div class="status" style="margin-top: 15px;">';
          statsHtml += `<div class="status-item"><strong>${indexData.totalStyles || '?'}</strong><span>Total Styles</span></div>`;
          statsHtml += `<div class="status-item"><strong>${indexData.independentStyles || '?'}</strong><span>Independent</span></div>`;
          statsHtml += `<div class="status-item"><strong>${indexData.dependentStyles || '?'}</strong><span>Dependent</span></div>`;
          statsHtml += '</div>';
          statusDiv.innerHTML += statsHtml;
        }

      } catch (err) {
        statusDiv.innerHTML = `
          <div style="padding: 15px; background: #f8d7da; border-left: 4px solid #dc3545; border-radius: 5px;">
            <strong>⚠️ Build not found</strong>
            <p>Run <code>npm run build</code> to generate the library files.</p>
          </div>
        `;
      }
    }

    checkBuildStatus();
  </script>
</body>
</html>
